(()=>{"use strict";const e=window.wp.blocks,t=window.wp.i18n,l=window.wp.element,s=window.wp.blockEditor,n=window.wp.data,o=window.wp.components,a=window.ReactJSXRuntime,c=(0,l.memo)(({attributes:e,setAttributes:l,changeContent:n})=>{const{content:c,columns:u,columnsAtPhones:r,columnsAtTablets:i}=e;return(0,a.jsx)(s.InspectorControls,{group:"settings",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("fieldset",{children:(0,a.jsx)(o.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,t.__)("Content type","theme-grid"),value:c,options:[{value:"custom",label:"Custom blocks"},{value:"dynamic",label:"Dynamic (post type)"}],onChange:e=>n(e)})}),(0,a.jsx)("fieldset",{children:(0,a.jsx)(o.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,t.__)("Columns","theme-highlight-section"),value:u,options:[{value:1,label:1},{value:2,label:2},{value:3,label:3},{value:4,label:4},{value:6,label:6},{value:8,label:8},{value:10,label:10},{value:12,label:12}],onChange:e=>l({columns:Number(e)})})}),(0,a.jsx)("fieldset",{children:(0,a.jsx)(o.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,t.__)("Columns at tablets (< 1024px)","theme-highlight-section"),value:i,options:[{value:1,label:1},{value:2,label:2},{value:3,label:3},{value:4,label:4},{value:6,label:6},{value:8,label:8},{value:10,label:10},{value:12,label:12}],onChange:e=>l({columnsAtTablets:Number(e)})})}),(0,a.jsx)("fieldset",{children:(0,a.jsx)(o.SelectControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,t.__)("Columns at phones (< 640px)","theme-highlight-section"),value:r,options:[{value:1,label:1},{value:2,label:2},{value:3,label:3},{value:4,label:4},{value:6,label:6},{value:8,label:8},{value:10,label:10},{value:12,label:12}],onChange:e=>l({columnsAtPhones:Number(e)})})})]})})},(e,t)=>e.attributes.content===t.attributes.content&&e.attributes.columns===t.attributes.columns&&e.attributes.columnsAtPhones===t.attributes.columnsAtPhones&&e.attributes.columnsAtTablets===t.attributes.columnsAtTablets&&e.changeContent===t.changeContent),u=(0,l.memo)(({attributes:e,setAttributes:l})=>{const{gap:n}=e;return(0,a.jsx)(s.InspectorControls,{group:"styles",children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("fieldset",{children:(0,a.jsx)(o.RangeControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:(0,t.__)("Gap","theme-grid"),value:n,min:0,max:10,step:1,onChange:e=>l({gap:e})})})})})},(e,t)=>e.attributes.gap===t.attributes.gap);function r(e){const{columns:t,columnsAtTablets:l,columnsAtPhones:s,gap:n}=e;return{className:`theme-grid grid grid-cols-${s} md:grid-cols-${l} xl:grid-cols-${t} gap-${n}`}}const i=JSON.parse('{"UU":"po-personal/theme-grid"}');(0,e.registerBlockType)(i.UU,{edit:function({attributes:e,setAttributes:o,clientId:i}){const{content:m}=e,b=(0,l.useMemo)(()=>({columns:e.columns,columnsAtTablets:e.columnsAtTablets,columnsAtPhones:e.columnsAtPhones,gap:e.gap}),[e.columns,e.columnsAtTablets,e.columnsAtPhones,e.gap]),{className:p}=r(b),d=(0,s.useBlockProps)({className:p}),g=(0,n.useSelect)(e=>{const t=e("core/block-editor").getBlock(i),l=t?.innerBlocks?.find(e=>"core/query"===e.name),s=l?.innerBlocks?.find(e=>"core/post-template"===e.name);return s||null},[i]),{replaceInnerBlocks:h,updateBlockAttributes:x}=(0,n.useDispatch)("core/block-editor"),v=(0,l.useCallback)(e=>{o({content:e}),h(i,[])});return(0,l.useEffect)(()=>{"custom"!==m&&g&&x(g.clientId,{className:p})},[p]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c,{attributes:e,setAttributes:o,changeContent:v}),(0,a.jsx)(u,{attributes:e,setAttributes:o}),"custom"===m&&(0,a.jsx)("div",{...d,children:(0,a.jsx)(s.InnerBlocks,{template:[...Array.from({length:e.columns},e=>["po-personal/theme-flex-grid-box",{},[["core/paragraph",{placeholder:(0,t.__)("Type text or add blocks using /")}]]])],templateLock:!1})}),"custom"!==m&&(0,a.jsx)(s.InnerBlocks,{allowedBlocks:["core/query"],template:[["core/query",{},[["core/post-template",{className:p},[]],["core/query-pagination",{},[["core/query-pagination-previous",{},[]],["core/query-pagination-numbers",{},[]],["core/query-pagination-next",{},[]]]],["core/query-no-results",{},[]]]]]})]})},save:function({attributes:e}){const{content:t}=e,{className:l}=r(e),n=s.useBlockProps.save({className:l});return"custom"===t?(0,a.jsx)("div",{...n,children:(0,a.jsx)(s.InnerBlocks.Content,{})}):(0,a.jsx)(s.InnerBlocks.Content,{})}})})();